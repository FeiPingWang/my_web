{% extends 'base.html' %}
{% import "pagination_macro.html" as macros %}
{% block title %} 首页 {% endblock %}

{% block top %}
{{ super() }}
{% endblock top %}

{% block top_plate %}
    <!--渲染版块-->
    {% for b in board %}
        <li><a href="#">{{ b.title }}</a></li>
    {% endfor %}
{% endblock top_plate %}

{% block right_top %}
<!-- 博客的信息 -->
<P>
    {{ g.my_session.query(Web_View).first().views }}次浏览</P>
    {{ g.my_session.query(Weekly).count() }}篇文章</P>
    {{ g.my_session.query(Comments).count() }}次回复</P>
</P>
{% endblock right_top %}

{% block right_center %}
<a href="{{ url_for('weekly.new') }}">新建文章</a>
{% endblock right_center %}

{% block center %}
    <div class="topic-list">
        <div class="topic-cell">
            <div class="topic-author-avater">
                <!--头像-->
            </div>
            {% for n in note %}
                <div class="topic-content">
                    <h4><a href="{{ url_for('weekly.detail', id=n.id) }}">{{ n.title }}</a></h4>
                    <p>
                        默认分类 • {{ g.my_session.query(User.user_name).filter(User.id == n.user_id).first()[0] }}
                        • {{ n.replys }} 个回复 • {{ n.views }} 次浏览 • {{ n.ct }}
                    </p>
                </div>
            {% endfor %}
        </div>
    </div>
    <!-- 导入 -->
    {{ macros.pagination(pagination) }}
{% endblock center %}
